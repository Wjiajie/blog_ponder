---
title: ä¸€æ–‡ç®€ä»‹C++å·¦/å³å€¼å¼•ç”¨ä»¥åŠç§»åŠ¨è¯­ä¹‰
slug: lvalue-rvalue-move-semantics
authors: [jiajiewu]
tags: [ç¼–ç¨‹è¯­è¨€]
keywords: ["blog", "C++", "å·¦å€¼", "å³å€¼", "ç§»åŠ¨è¯­ä¹‰"]
description: "C++ä¸­çš„å·¦å€¼å¼•ç”¨ï¼ˆlvalue referenceï¼‰å’Œå³å€¼å¼•ç”¨ï¼ˆrvalue referenceï¼‰ï¼Œä»¥åŠç§»åŠ¨è¯­ä¹‰ï¼ˆmove semanticsï¼‰ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ç¨‹åºæ€§èƒ½å’Œæ•ˆç‡è€Œè®¾è®¡çš„è¯­è¨€ç‰¹æ€§ã€‚æœ¬æ–‡ä¼šä»‹ç»å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„ä½¿ç”¨å½¢å¼ï¼Œä»¥åŠåŸºäºå³å€¼å¼•ç”¨çš„ç§»åŠ¨è¯­ä¹‰çš„ä½¿ç”¨æ ·ä¾‹ã€‚"
draft: false
---

C++ä¸­çš„å·¦å€¼å¼•ç”¨ï¼ˆlvalue referenceï¼‰å’Œå³å€¼å¼•ç”¨ï¼ˆrvalue referenceï¼‰ï¼Œä»¥åŠç§»åŠ¨è¯­ä¹‰ï¼ˆmove semanticsï¼‰ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ç¨‹åºæ€§èƒ½å’Œæ•ˆç‡è€Œè®¾è®¡çš„è¯­è¨€ç‰¹æ€§ã€‚æœ¬æ–‡ä¼šä»‹ç»å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„ä½¿ç”¨å½¢å¼ï¼Œä»¥åŠåŸºäºå³å€¼å¼•ç”¨çš„ç§»åŠ¨è¯­ä¹‰çš„ä½¿ç”¨æ ·ä¾‹ã€‚

æœ¬æ–‡çš„æ€»ç»“ä¸»è¦æ¥è‡ªäºchernoçš„C++ç³»åˆ—è§†é¢‘ï¼Œå¯ä»¥åœ¨bilibiliè§‚çœ‹ç¿»è¯‘çš„ä¸­æ–‡ç‰ˆæœ¬ã€‚


[ç¥ç»å…ƒçŒ«çš„ä¸ªäººç©ºé—´-ç¥ç»å…ƒçŒ«ä¸ªäººä¸»é¡µ-å“”å“©å“”å“©è§†é¢‘](https://space.bilibili.com/364152971/channel/collectiondetail?sid=13909)

<!-- truncate -->

# å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨

## å·¦å€¼å’Œå³å€¼

å¾ˆå¤šäººå°†å·¦å€¼å®šä¹‰ä¸ºæœ‰åœ°å€çš„å€¼ï¼Œä¸€äº›ä¸´æ—¶å¯¹è±¡/å­—é¢é‡ï¼ˆæ²¡æœ‰åœ°å€ï¼‰å®šä¹‰ä¸ºå³å€¼ã€‚ä¸‹é¢ä»£ç ä¸­çš„`i`æ˜¯å·¦å€¼ï¼Œå®ƒæœ‰å®é™…çš„å†…å­˜åœ°å€ï¼Œ`10`æ˜¯å³å€¼ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå­—é¢é‡ï¼Œæ²¡æœ‰å†…å­˜åœ°å€ã€‚

```cpp
#include <iostream>

int main()
{
	int i = 10;
	
	// i = 20; âœ…éå¸¸é‡çš„å·¦å€¼å¯ä»¥è¢«èµ‹å€¼
	// 10 = i; âå³å€¼æ²¡æœ‰å®é™…çš„å†…å­˜åœ°å€ï¼Œä¸å¯æ‰§è¡Œèµ‹å€¼æ“ä½œ
	// int a = i; âœ… å·¦å€¼iå¯ä»¥èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå·¦å€¼a
	return 0;
}

```

## å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨

å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸­è¿”å›ä¸€ä¸ªå·¦å€¼çš„å¼•ç”¨ï¼Œå°±å¯ä»¥æŠŠå¦å¤–ä¸€ä¸ªå·¦å€¼æˆ–è€…å³å€¼èµ‹äºˆç»™å®ƒï¼Œèƒ½å¤ŸçœŸæ­£åœ°ä¿®æ”¹è¿™ä¸ªå·¦å€¼å†…å­˜åœ°å€ä¸­å®é™…å­˜å‚¨çš„å€¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­æœ‰ä¸‰ä¸ª`GetValue` çš„ç‰ˆæœ¬ï¼Œå½“è°ƒç”¨`GetValue() = 5;` æ—¶ï¼Œåªæœ‰`ç‰ˆæœ¬3`èƒ½ç¼–è¯‘é€šè¿‡ã€‚

```cpp
#include <iostream>

// ç‰ˆæœ¬1ï¼šè¿”å›ä¸€ä¸ªå³å€¼
int GetValue()
{
	return 10;
}

// ç‰ˆæœ¬2ï¼šæ³¨æ„å™¢ï¼Œè¿™é‡Œè¿”å›çš„ä»ç„¶æ˜¯ä¸€ä¸ªå³å€¼
int GetValue()
{
	static int value = 10;
	return value;
}

// ç‰ˆæœ¬3ï¼šè¿”å›ä¸€ä¸ªå·¦å€¼å¼•ç”¨
int& GetValue()
{
	static int value = 10;
	return value;
}

int main()
{
	// è¾“å‡º10
	std::cout<< "GetValue 1: "<< GetValue() << std::endl;
	GetValue() = 5;
	// è¾“å‡º5
  std::cout<< "GetValue 2: "<< GetValue() << std::endl;
	return 0;
}

```

æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œéå¸¸é‡çš„**å·¦å€¼å¼•ç”¨çš„åˆå§‹å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå·¦å€¼**ï¼š

```cpp
void SetValue(int& value)
{

}

int main()
{ 
	// âéå¸¸é‡çš„å·¦å€¼å¼•ç”¨valueï¼Œå®ƒçš„åˆå§‹å€¼ä¸èƒ½æ¥å—æ˜¯ä¸€ä¸ªå³å€¼ã€‚
  SetValue(5);
  
  int a = 5;
  SetValue(a); // âœ…éå¸¸é‡çš„å·¦å€¼å¼•ç”¨valueï¼Œå®ƒçš„åˆå§‹å€¼æ¥å—æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚
	return 0;
}
```

ä½†å¦‚æœå·¦å€¼å¼•ç”¨æ˜¯å¸¸é‡çš„ï¼Œæƒ…å†µç¨å¾®æœ‰ç‚¹ä¸åŒ,åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œç¼–è¯‘å™¨ä¼šåŸºäºè¿™ä¸ªå³å€¼`5`å®šä¹‰ä¸€ä¸ªä¸´æ—¶å·¦å€¼å˜é‡`temp`ï¼Œå¹¶èµ‹å€¼ç»™å·¦å€¼å¼•ç”¨`value` ã€‚

```cpp
// ç¼–è¯‘å™¨å…ˆå®šä¹‰ä¸€ä¸ªå·¦å€¼tempï¼šint temp = 5; 
// å†æŠŠå·¦å€¼tempèµ‹å€¼ç»™valueï¼šconst int& value = temp;
void SetValue(const int& value)
{

}

int main()
{ 
	// âœ…å½“ä¸€ä¸ªå³å€¼èµ‹å€¼ç»™ä¸€ä¸ªå¸¸é‡çš„å·¦å€¼å¼•ç”¨valueï¼Œç¼–è¯‘å™¨ä¼šæ‚„æ‚„åšä¸€äº›äº‹æƒ…ã€‚
  SetValue(5);
	return 0;
}
```

æ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šæŠŠä¸€ä¸ªä¸éœ€è¦ä¿®æ”¹çš„å‡½æ•°å…¥å‚å®šä¹‰ä¸ºå¸¸é‡å¼•ç”¨`const T&` ,è¿™å…è®¸è¿™ä¸ªå‡½æ•°çš„å…¥å‚æ¥å—å·¦å€¼å’Œå³å€¼ï¼Œè€Œä¸å¤ªéœ€è¦å…³æ³¨å…¶ä¸­çš„åŒºåˆ«ã€‚

ä¼¼ä¹æ€»æ˜¯ä½¿ç”¨å¸¸é‡çš„å·¦å€¼å¼•ç”¨å°±å¯ä»¥äº†ï¼Œå®ƒå¯ä»¥æ¥å—å·¦å€¼å’Œå³å€¼çš„ä¼ å…¥ï¼Œä½†æœ‰ä¸€äº›åœºæ™¯ï¼Œå¦‚æœä½ æ˜ç¡®çŸ¥é“ä¼ å…¥å‡½æ•°çš„å˜é‡åªæ˜¯ä¸€äº›ä¸´æ—¶å¯¹è±¡ï¼Œä½ å¯ä»¥æ˜¾ç¤ºåœ°æŠŠå®ƒå®šä¹‰ä¸ºå³å€¼å¼•ç”¨ï¼ˆä½¿ç”¨å½¢å¼æ˜¯ `T&&`ï¼‰ï¼Œè¿™ä¸ªå®ç°çš„æ€§èƒ½æ›´ä¼˜ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°ä¼šæ‹’ç»å·¦å€¼å¯¹è±¡çš„ä¼ å…¥ã€‚

```cpp
#include <iostream>

// ç‰ˆæœ¬1ï¼šæ¥å—å·¦å€¼å’Œå³å€¼ä½œä¸ºå…¥å‚
void PrintName(const std::string& name)
{
    std::cout << "[lvalue] "<< name << std::endl;
}

// ç‰ˆæœ¬2ï¼šåªæ¥å—å³å€¼
void PrintName(std::string&& name)
{
    std::cout << "[rvalue] " << name << std::endl;
}

int main()
{
    std::string firstName = "Yan";
    std::string lastName = "Chernikov";

    PrintName(firstName); // æ‰“å° [lvalue] Yan
    PrintName(firstName + lastName); // æ‰“å° [rvalue] YanChernikov
}

```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šé€‰æ‹©`ç‰ˆæœ¬1` çš„`PrintName` æ¥å¤„ç†å·¦å€¼ï¼Œè€Œé€‰æ‹©`ç‰ˆæœ¬2` çš„`PrintName` æ¥å¤„ç†å³å€¼ï¼Œè™½ç„¶`ç‰ˆæœ¬1` ä¹Ÿæ˜¯å¯ä»¥å¤„ç†å³å€¼çš„ï¼Œä½†è¿˜è®°å¾—ä¸Šé¢æåˆ°çš„ï¼Œç¼–è¯‘å™¨éœ€è¦å®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„å·¦å€¼`temp` æ¥å¤„ç†è¿™ä¸ªæƒ…å†µï¼Œè¿™æ„å‘³ç€é¢å¤–çš„å¼€é”€ã€‚ä½¿ç”¨å³å€¼å¼•ç”¨é¿å…äº†ä¸å¿…è¦çš„å¼€é”€ã€‚æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬æ˜ç¡®ä¼ å…¥çš„æ˜¯å³å€¼ï¼Œå®ƒä¸ä¼šå­˜åœ¨å¤ªé•¿çš„æ—¶é—´ï¼Œä»¥åŠåœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹è¢«æŒæœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°æŠŠè¿™ä¸ªå¯¹è±¡çš„èµ„æºâ€œå·èµ°â€ç»™å…¶ä»–çš„æ‹·è´å¯¹è±¡ï¼Œæ— éœ€å…³ç³»è¿™äº›æ“ä½œä»¥åï¼ŒåŸå§‹å¯¹è±¡æ˜¯å¦å®Œæ•´ã€‚è¿™ä¸ªæŠ€å·§åœ¨ç§»åŠ¨è¯­ä¹‰ï¼ˆä¸‹æ–‡æœ‰ä»‹ç»ï¼‰ä¸­å¾—åˆ°å¹¿æ³›ä½¿ç”¨ã€‚

## æ€»ç»“

- å·¦å€¼æœ‰å®é™…çš„å†…å­˜åœ°å€ï¼Œè€Œå³å€¼æ²¡æœ‰ã€‚
- ä¸å¯ä»¥ä½¿ç”¨å³å€¼æ¥åˆå§‹åŒ–éå¸¸é‡çš„å·¦å€¼å¼•ç”¨ã€‚
- å¯ä»¥ä½¿ç”¨å³å€¼æ¥åˆå§‹åŒ–å¸¸é‡çš„å·¦å€¼å¼•ç”¨ï¼Œç¼–è¯‘å™¨ä¼šåšä¸€äº›é¢å¤–çš„æ“ä½œä¿è¯èƒ½ç¼–è¯‘é€šè¿‡ã€‚
- ä½¿ç”¨å¸¸é‡çš„å·¦å€¼å¼•ç”¨`const T&`æ˜¯ç®€ä¾¿çš„ï¼Œå®ƒå¯ä»¥å¤„ç†å·¦å€¼å’Œå³å€¼ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
- åœ¨æ˜ç¡®çš„åªéœ€è¦æ¥å—ä¸€ä¸ªå³å€¼çš„æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨å³å€¼å¼•ç”¨`T&&`ï¼Œå®ƒæ€§èƒ½æ›´å¥½ã€‚

# ç§»åŠ¨è¯­ä¹‰

å½“éœ€è¦æŠŠä¸€ä¸ªå¯¹è±¡ä¼ å…¥å‡½æ•°ä¸­ï¼Œè€Œè¿™ä¸ªå‡½æ•°éœ€è¦å¾—åˆ°è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°ä»ç„¶ä¼šè¢«è°ƒç”¨åˆ°ï¼Œä»¥æ„é€ ä¸€ä¸ªä¸€æ¬¡æ€§å¯¹è±¡ï¼Œå¹¶æŠŠè¿™ä¸ªä¸€æ¬¡æ€§å¯¹è±¡å¤åˆ¶åˆ°æ­£åœ¨è°ƒç”¨çš„å‡½æ•°å½“ä¸­ã€‚å¦‚æœæˆ‘ä»¬çœæ‰æ„é€ ä¸´æ—¶å¯¹è±¡å¹¶å¤åˆ¶å®ƒçš„æ“ä½œï¼Œè€Œæ˜¯ç›´æ¥ç§»åŠ¨è¯¥å¯¹è±¡ï¼Œæ€§èƒ½ä¼šæ›´å¥½ï¼Œç§»åŠ¨è¯­ä¹‰å°±æ˜¯ä¸ºæ­¤æœåŠ¡ã€‚åœ¨ç±»å¯¹è±¡ä¸­ï¼Œç§»åŠ¨è¯­ä¹‰ç»å¸¸åº”ç”¨çš„åœ°æ–¹æ˜¯**ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆMove Constructorï¼‰å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ï¼ˆMove Assignment Operatorï¼‰ã€‚**ä½†åœ¨ä»‹ç»ç§»åŠ¨è¯­ä¹‰ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹åœ¨è¿™ä¸¤ä¸ªå‡½æ•°ç¼ºçœçš„æƒ…å†µä¸‹ï¼ŒæŠŠå¯¹è±¡ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°éœ€è¦è§¦å‘å“ªäº›æ“ä½œã€‚

```cpp
#include <iostream>
#include <cstring>

class String
{
public:
    String() = default;
    String(const char* string)
    {
        std::cout<<"Created!"<<std::endl;
        m_size = strlen(string);
        m_Data = new char[m_size];
        memcpy(m_Data, string, m_size);
    }
    String(const String& other)
    {
        std::cout<<"Copied!"<<std::endl;
        m_size = other.m_size;
        m_Data = new char[m_size];
        memcpy(m_Data, other.m_Data, m_size);
    }
    ~String()
    {
        std::cout<<"Deleted!"<<std::endl;
        delete[] m_Data;
    }

    void Print()
    {
        for (uint32_t i = 0; i < m_size; i++)
        {
            printf("%c", m_Data[i]);
        }
        printf("\n");
    }

private:
    char* m_Data;
    uint32_t m_size;
};

class Entity
{
public:
    Entity(const String& name)
        : m_Name(name)
        {
        }

    void PrintName()
    {
        m_Name.Print();
    }

private:
    String m_Name;
};

int main()
{
    Entity entity(String("cherno"));
    entity.PrintName();
    return 0;
}

```

è¿™ä¸ªç¨‹åºçš„è¾“å‡ºæ˜¯ï¼š

```
Created!
Copied!
Deleted!
cherno
Deleted!
```

æ„å‘³ç€`Entity entity(String("cherno"));` è¿™è¡Œä¼šé¦–å…ˆè°ƒç”¨`String` çš„æ„é€ å‡½æ•°ï¼Œæ„é€ ä¸€ä¸ªä¸€æ¬¡æ€§å¯¹è±¡ï¼Œå†æŠŠè¿™ä¸ªå¯¹è±¡æ‹·è´åˆ°`Entity` ç±»å¯¹è±¡çš„ç§æœ‰æˆå‘˜å¯¹è±¡`m_Name`ä¸­ï¼Œä¹‹åä¸€æ¬¡æ€§å¯¹è±¡ä¼šææ„ï¼Œæ¥ä¸‹æ¥`entity.PrintName();` ä¼šæ‰“å°`cherno` ï¼Œæ•´ä½“çš„å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œéšç€`Entity`çš„ææ„ï¼Œç§æœ‰æˆå‘˜`m_Name` çš„ææ„è§¦å‘æœ€åä¸€æ¬¡çš„`Deleted!` æ‰“å°ã€‚

å› ä¸ºåœ¨mainå‡½æ•°çš„`Entity entity(String("cherno"));` è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“`Stirng(â€chernoâ€)`åªæ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä¸éœ€è¦å…³å¿ƒæ„é€ ä¹‹åçš„æ‰€æœ‰æƒå½’å±åˆ°å“ªæ–¹çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å‰©ä¸‹ä¸­é—´çš„`Copied!` å’Œç¬¬ä¸€æ¬¡`Deleted!` çš„å¼€é”€ï¼Œç§»åŠ¨è¯­ä¹‰å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚

## ç§»åŠ¨æ„é€ å‡½æ•°

```cpp
class String
{
public:
    ...
    // éœ€è¦éå¸¸æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å·èµ°åŸå§‹çš„èµ„æºï¼Œéœ€è¦æŠŠ
    // åŸå§‹å¯¹è±¡ç½®ç©ºï¼Œä¸ç„¶åœ¨åŸå§‹å¯¹è±¡ææ„æ—¶ï¼Œè§¦å‘çš„ææ„å‡½æ•°
    // å¯¹æŠŠå¦ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜æ•°æ®ä¹Ÿæ¸…ç©ºï¼Œå› ä¸ºè¿™é‡Œçš„moveå®ç°ï¼Œ
    // åªæ˜¯ç”¨æ–°çš„æŒ‡é’ˆæŒ‡å‘çš„åŸæ¥çš„å†…å­˜æ•°æ®è€Œå·²
    String(String&& other)
    {
			  std::cout<<"Moved!"<<std::endl;
        m_size = other.m_size;
        m_Data = other.m_Data;
        other.m_size = 0;
        other.m_Data = nullptr;
    }
    ...
};

class Entity
{
		...
		// è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒString&& nameæ˜¯å³å€¼å¼•ç”¨ï¼ˆå€¼ç±»å‹ï¼‰ï¼Œ
    // å³å€¼å¼•ç”¨çš„å€¼ç±»å‹å…¶å®è¿˜æ˜¯ä¸ªå·¦å€¼ï¼ˆå¯ä»¥å–&æ“ä½œç¬¦ï¼‰
    // æ‰€ä»¥åœ¨ç»™m_Nameåˆå§‹åŒ–æ—¶ï¼Œéœ€è¦ç±»å‹è½¬æ¢ä¸€ä¸‹ï¼Œä¸ç„¶å…¶å®
    // è¿˜æ˜¯ä¼šè§¦å‘Stringçš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯å³å€¼å¼•ç”¨æ„é€ å‡½æ•°
    Entity(String&& name)
        : m_Name((String&&)name)
        {
        }

    ...
};
```

æˆ‘ä»¬å¯ä»¥åœ¨`Entity` ä¸­å®šä¹‰ä¸€ä¸ªå³å€¼å¼•ç”¨æ„é€ å‡½æ•°ï¼Œå½“ä½¿ç”¨ä¸´æ—¶å¯¹è±¡æ„é€ `Entity` æ—¶è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¸”åœ¨`String` ä¸­å®šä¹‰ä¸€ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ã€‚ä¸Šé¢çš„å‡½æ•°å®šä¹‰ä¸­æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼šä¸€æ˜¯ç§»åŠ¨æ„é€ å‡½æ•°éœ€è¦æŠŠåŸå§‹å¯¹è±¡ç½®ç©ºï¼Œé˜²æ­¢åŸå§‹å¯¹è±¡çš„ææ„å‡½æ•°è°ƒç”¨æ—¶ï¼ŒæŠŠå†…å­˜æ•°æ®æ¸…ç©ºï¼›äºŒæ˜¯å³å€¼å¼•ç”¨çš„å€¼ç±»å‹æ˜¯å·¦å€¼ï¼Œå¦‚æœé¢„æœŸæŠŠå®ƒå½“ä½œä¸€ä¸ªå³å€¼å†ä¼ é€’ï¼Œéœ€è¦ç±»å‹è½¬æ¢ä¸€ä¸‹ã€‚

ä¸Šé¢çš„ç¨‹åºè°ƒç”¨çš„è¾“å‡ºç»“æœæ˜¯ï¼š

```cpp
Created!
Moved!
Deleted!
cherno
Deleted!
```

é€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬èŠ‚çœäº†ä¸€æ¬¡æ‹·è´æ“ä½œï¼Œå¹¶ä¸”åœ¨ç¬¬ä¸€æ¬¡`Deleted` æ“ä½œæ—¶ï¼Œå¹¶æ²¡æœ‰å®é™…ä¸Šæ¸…ç©ºå†…å­˜ä¸­çš„æ•°æ®ã€‚

ä¸Šé¢æåˆ°ï¼Œå½“æŠŠå³å€¼å¼•ç”¨å†æ¬¡å½“ä½œå³å€¼ä¼ é€’æ—¶ï¼Œéœ€è¦ç±»å‹è½¬æ¢ï¼Œå…¶å®`std::move`å°±æ˜¯å¹²è¿™ä»¶äº‹æƒ…çš„ï¼ŒæŸ¥çœ‹`std::move` çš„å®šä¹‰ï¼Œæ˜¯æŠŠä¸€ä¸ªç±»å‹`_Ty` é€šè¿‡`static_cast` è½¬æ¢æˆ`_Ty&&` çš„å½¢å¼ã€‚

```cpp
_EXPORT_STD template <class _Ty>
_NODISCARD _MSVC_INTRINSIC constexpr remove_reference_t<_Ty>&& move(_Ty&& _Arg) noexcept {
    return static_cast<remove_reference_t<_Ty>&&>(_Arg);
}
```

æ‰€ä»¥`Entity` çš„ç§»åŠ¨æ„é€ å‡½æ•°è¿˜å¯ä»¥å†™æˆï¼š

```cpp
Entity(String&& name)
	  : m_Name(std::move(name))
	  {
	  }
```

## ç§»åŠ¨**èµ‹å€¼æ“ä½œç¬¦**

å½“æƒ³æŠŠä¸€ä¸ªä¸´æ—¶å¯¹è±¡ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œä¸Šä¸€å°èŠ‚ä»‹ç»äº†ç§»åŠ¨æ„é€ å‡½æ•°ã€‚å½“æƒ³æŠŠä¸€ä¸ªä¸´æ—¶å¯¹è±¡ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²æœ‰çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨**ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦**`operator=`**ã€‚**æˆ‘ä»¬ç›´æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š

```cpp
class String
{
public:
    ...
    String& operator= (String&& other)
    {
        if (&other != this)
        {
            delete[] m_Data;
        }
        std::cout<<"Moved Assignment!"<<std::endl;
        m_size = other.m_size;
        m_Data = other.m_Data;
        other.m_size = 0;
        other.m_Data = nullptr;
        return *this;
    }
		...
};

class Entity
{
public:
    ...
    Entity& operator= (Entity&& other)
    {
        m_Name = std::move(other.m_Name);
        return *this;
    }
		...
    
};

int main()
{
    Entity entity1(String("cherno"));
    Entity entity2;
    std::cout<< "entity1: ";
    entity1.PrintName();
    std::cout<< "entity2: ";
    entity2.PrintName();
    entity2 = std::move(entity1);
    std::cout<< "entity1: ";
    entity1.PrintName();
    std::cout<< "entity2: ";
    entity2.PrintName();
    return 0;
}
```

ä¸Šé¢çš„`String` å®ç°çš„ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ï¼Œå’Œç§»åŠ¨æ„é€ å‡½æ•°æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼Œæœ€é‡è¦çš„åŒºåˆ«æ˜¯ï¼šç”±äº`entity2` æ˜¯ä¸€ä¸ªå·²ç»æ„é€ äº†çš„å¯¹è±¡ï¼Œå®ƒçš„`m_Data`ä¸­å¯èƒ½å·²ç»æœ‰ä¸€äº›é»˜è®¤å€¼äº†ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥è°ƒç”¨`m_Data = other.m_Data;` å°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œæ­£ç¡®çš„æ–¹å¼æ˜¯åœ¨é‡æ–°æŒ‡å‘å…¶ä»–å†…å­˜æ—¶ï¼Œå…ˆåˆ é™¤åŸå§‹å†…å­˜çš„æ•°æ®ï¼Œä½†æ˜¯ä¸ºäº†é˜²æ­¢ç±»ä¼¼`entity1 = std::move(entity1);` è¿™ç§ç§»åŠ¨å‘è‡ªèº«çš„æ“ä½œæ—¶è¯¯åˆ é™¤å†…å­˜æ•°æ®ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªåˆ¤åˆ«é€»è¾‘ï¼š

```cpp
String& operator= (String&& other)
  {
      if (&other != this)
      {
          delete[] m_Data;
      }
      ...
      return *this; //è®°å¾—æœ‰è¿”å›å€¼
  }
```

æ–°å¢**ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦**ä¹‹åï¼Œå‡½æ•°çš„æ‰“å°è¾“å‡ºæ˜¯ï¼š

```cpp
Created!
Moved!
Deleted!
entity1: cherno
entity2: 
Moved Assignment!
entity1: 
entity2: cherno
Deleted!
Deleted!
```

å‰ä¸‰è¡Œæˆ‘ä»¬å·²ç»çŸ¥é“åœ¨è°ƒç”¨`Entity entity1(String("cherno"));` æ—¶è§¦å‘çš„æ‰“å°ï¼Œä¸­é—´äº”è¡Œæ˜¯è§¦å‘äº†**ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦**ä¹‹åæ•°æ®åšäº†äº¤æ¢ï¼Œæˆ‘ä»¬å®ç°äº†ç›®çš„ï¼Œå¹¶ä¸”æ²¡æœ‰è§¦å‘é¢å¤–çš„æ„é€ å‡½æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„å‡½æ•°ä¸­ï¼Œ**æˆ‘ä»¬åªå®šä¹‰äº†ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ï¼Œæ²¡æœ‰å®ç°èµ‹å€¼æ“ä½œç¬¦ï¼Œ**æ‰€ä»¥æˆ‘ä»¬åœ¨`main`å‡½æ•°ä¸­è°ƒç”¨æ—¶éœ€è¦æ˜¾å¼åœ°è°ƒç”¨`std::move`ã€‚

## å®Œæ•´çš„ä»£ç å®ä¾‹

```cpp
#include <iostream>
#include <cstring>

class String
{
public:
    String() = default;
    String(const char* string)
    {
        std::cout<<"Created!"<<std::endl;
        m_size = strlen(string);
        m_Data = new char[m_size];
        memcpy(m_Data, string, m_size);
    }
    String(const String& other)
    {
        std::cout<<"Copied!"<<std::endl;
        m_size = other.m_size;
        m_Data = new char[m_size];
        memcpy(m_Data, other.m_Data, m_size);
    }
    String(String&& other)
    {
        std::cout<<"Moved!"<<std::endl;
        m_size = other.m_size;
        m_Data = other.m_Data;

        // éœ€è¦éå¸¸æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å·èµ°åŸå§‹çš„èµ„æºï¼Œéœ€è¦æŠŠ
        // åŸå§‹å¯¹è±¡ç½®ç©ºï¼Œä¸ç„¶åœ¨åŸå§‹å¯¹è±¡ææ„æ—¶ï¼Œè§¦å‘çš„ææ„å‡½æ•°
        // å¯¹æŠŠå¦ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜æ•°æ®ä¹Ÿæ¸…ç©ºï¼Œå› ä¸ºè¿™é‡Œçš„moveå®ç°ï¼Œ
        // åªæ˜¯ç”¨æ–°çš„æŒ‡é’ˆæŒ‡å‘çš„åŸæ¥çš„å†…å­˜æ•°æ®è€Œå·²
        other.m_size = 0;
        other.m_Data = nullptr;
    }

    String& operator= (String&& other)
    {
        if (&other != this)
        {
            delete[] m_Data;
        }
        std::cout<<"Moved Assignment!"<<std::endl;
        m_size = other.m_size;
        m_Data = other.m_Data;
        other.m_size = 0;
        other.m_Data = nullptr;
        return *this;
    }

    ~String()
    {
        std::cout<<"Deleted!"<<std::endl;
        delete[] m_Data;
    }

    void Print()
    {
        for (uint32_t i = 0; i < m_size; i++)
        {
            printf("%c", m_Data[i]);
        }
        printf("\n");
    }

private:
    char* m_Data;
    uint32_t m_size;
};

class Entity
{
public:
    Entity() = default;
    Entity(const String& name)
        : m_Name(name)
        {
        }
    
    // è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒString&& nameæ˜¯å³å€¼å¼•ç”¨ï¼ˆå€¼ç±»å‹ï¼‰ï¼Œ
    // å³å€¼å¼•ç”¨çš„å€¼ç±»å‹å…¶å®è¿˜æ˜¯ä¸ªå·¦å€¼ï¼ˆå¯ä»¥å–&æ“ä½œç¬¦ï¼‰
    // æ‰€ä»¥åœ¨ç»™m_Nameåˆå§‹åŒ–æ—¶ï¼Œéœ€è¦ç±»å‹è½¬æ¢ä¸€ä¸‹ï¼Œä¸ç„¶å…¶å®
    // è¿˜æ˜¯ä¼šè§¦å‘Stringçš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯å³å€¼å¼•ç”¨æ„é€ å‡½æ•°
    Entity(String&& name)
        : m_Name(std::move(name))
        {
        }

    Entity& operator= (Entity&& other)
    {
        m_Name = std::move(other.m_Name);
        return *this;
    }

    void PrintName()
    {
        m_Name.Print();
    }

private:
    String m_Name;
};

int main()
{
    Entity entity1(String("cherno"));
    Entity entity2;
    std::cout<< "entity1: ";
    entity1.PrintName();
    std::cout<< "entity2: ";
    entity2.PrintName();
    entity2 = std::move(entity1);
    std::cout<< "entity1: ";
    entity1.PrintName();
    std::cout<< "entity2: ";
    entity2.PrintName();
    return 0;
}

```

# å…¨æ–‡çš„æ¦‚å¿µæ€»ç»“

é€šè¿‡ä¸Šé¢çš„æ¦‚å¿µè§£é‡Šï¼Œåº”è¯¥èƒ½æ¯”è¾ƒæ¸…æ¥šåœ°äº†è§£äº†å·¦å€¼ã€å³å€¼ã€å·¦å€¼å¼•ç”¨ã€å³å€¼å¼•ç”¨ã€ç§»åŠ¨è¯­ä¹‰è¿™äº›æ¦‚å¿µäº†ã€‚æœ¬å°èŠ‚æ˜¯å¯¹å…¶ä¸­ä¸€äº›æ¦‚å¿µçš„é‡æ–°æ¦‚æ‹¬ï¼Œæ–‡æœ¬ç”Ÿæˆç”±kimi chatç»™å‡ºã€‚ç”±äºè¿™äº›æ¦‚å¿µä¸ä¸€ä¸ªç±»å¸¸è§çš„å‡ ä¸ªå‡½æ•°ï¼ˆ**æ‹·è´æ„é€ å‡½æ•°**ï¼Œ**æ‹·è´èµ‹å€¼æ“ä½œç¬¦ï¼Œææ„å‡½æ•°ï¼Œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç§»åŠ¨æ„é€ å‡½æ•°**ï¼‰ç›¸å…³ï¼Œä¸‹é¢ä¹Ÿç»™å‡ºäº†C++é¢†åŸŸçš„ä¸‰äº”æ³•åˆ™çš„ä½¿ç”¨å»ºè®®ã€‚

## å·¦å€¼å¼•ç”¨ï¼ˆLvalue Referenceï¼‰

å·¦å€¼å¼•ç”¨æ˜¯C++98ä¸­å¼•å…¥çš„æ¦‚å¿µï¼Œå®ƒå…è®¸å˜é‡å¼•ç”¨å¦ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ã€‚å·¦å€¼å¼•ç”¨çš„ä¸»è¦ä½œç”¨æ˜¯ï¼š

1. **æä¾›å¯¹å¯¹è±¡çš„åˆ«å**ï¼šå·¦å€¼å¼•ç”¨å¯ä»¥ä½œä¸ºå·²æœ‰å¯¹è±¡çš„åˆ«åï¼Œå…è®¸å¯¹åŸå§‹å¯¹è±¡è¿›è¡Œä¿®æ”¹ã€‚
2. **å‡½æ•°å‚æ•°ä¼ é€’**ï¼šé€šè¿‡å·¦å€¼å¼•ç”¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥ä½¿å¾—å‡½æ•°èƒ½å¤Ÿä¿®æ”¹ä¼ å…¥çš„å¯¹è±¡ã€‚
3. **é¿å…æ‹·è´**ï¼šå¯¹äºå¤§å‹å¯¹è±¡æˆ–èµ„æºå¯†é›†å‹å¯¹è±¡ï¼Œä½¿ç”¨å·¦å€¼å¼•ç”¨å¯ä»¥é¿å…åœ¨å‡½æ•°è°ƒç”¨æ—¶è¿›è¡Œå¯¹è±¡æ‹·è´ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚

## å³å€¼å¼•ç”¨ï¼ˆRvalue Referenceï¼‰

å³å€¼å¼•ç”¨æ˜¯C++11ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œç”¨äºå¼•ç”¨ä¸´æ—¶å¯¹è±¡æˆ–å³å°†â€œæ¶ˆå¤±â€çš„å€¼ã€‚å³å€¼å¼•ç”¨çš„ä½œç”¨åŒ…æ‹¬ï¼š

1. **ç§»åŠ¨è¯­ä¹‰**ï¼šå³å€¼å¼•ç”¨å…è®¸èµ„æºçš„è½¬ç§»ï¼ˆmoveï¼‰ï¼Œè€Œä¸æ˜¯æ‹·è´ã€‚è¿™æ„å‘³ç€å¯ä»¥å°†ä¸´æ—¶å¯¹è±¡çš„èµ„æºç›´æ¥è½¬ç§»ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„èµ„æºå‰¯æœ¬ï¼Œä»è€ŒèŠ‚çœå†…å­˜å’ŒCPUèµ„æºã€‚
2. **ä¼˜åŒ–æ€§èƒ½**ï¼šé€šè¿‡å³å€¼å¼•ç”¨ï¼Œå¯ä»¥ä¼˜åŒ–é‚£äº›è¿”å›å±€éƒ¨å¯¹è±¡çš„å‡½æ•°ï¼Œé¿å…ä¸å¿…è¦çš„å¯¹è±¡æ‹·è´ï¼Œç‰¹åˆ«æ˜¯åœ¨å®¹å™¨æ“ä½œä¸­ï¼Œå¦‚`std::vector`çš„`emplace_back`æ–¹æ³•ã€‚
3. **å®Œç¾è½¬å‘**ï¼šåœ¨æ¨¡æ¿ç¼–ç¨‹ä¸­ï¼Œå³å€¼å¼•ç”¨å¯ä»¥ç”¨äºå®Œç¾è½¬å‘ï¼Œä¿æŒå‚æ•°çš„å€¼ç±»åˆ«ï¼ˆå·¦å€¼æˆ–å³å€¼ï¼‰ï¼Œè¿™å¯¹äºåº“è®¾è®¡å’Œæ³›å‹ç¼–ç¨‹éå¸¸æœ‰ç”¨ã€‚

## ç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰

ç§»åŠ¨è¯­ä¹‰æ˜¯åˆ©ç”¨å³å€¼å¼•ç”¨æ¥å®ç°çš„ä¸€ç§æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼š

1. **å‡å°‘ä¸å¿…è¦çš„æ‹·è´**ï¼šç§»åŠ¨è¯­ä¹‰å…è®¸å¯¹è±¡åœ¨è½¬ç§»èµ„æºæ—¶é¿å…è¿›è¡Œæ˜‚è´µçš„å†…å­˜æ‹·è´æ“ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠåˆ°å¤§å‹æ•°æ®ç»“æ„æˆ–èµ„æºç®¡ç†ï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ï¼‰æ—¶ï¼Œè¿™ç§ä¼˜åŒ–å°¤ä¸ºæ˜¾è‘—ã€‚
2. **æé«˜æ•ˆç‡**ï¼šç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ä½¿å¾—å¯¹è±¡å¯ä»¥åœ¨ä¸æ¶‰åŠèµ„æºæ‹·è´çš„æƒ…å†µä¸‹â€œå€Ÿç”¨â€ä¸´æ—¶å¯¹è±¡çš„èµ„æºï¼Œè¿™æ ·å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚
3. **æ”¯æŒèµ„æºå›æ”¶**ï¼šç§»åŠ¨è¯­ä¹‰è¿˜æ”¯æŒèµ„æºçš„å›æ”¶ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„èµ„æºè¢«ç§»åŠ¨åï¼ŒåŸå¯¹è±¡é€šå¸¸ä¼šå°†èµ„æºæŒ‡é’ˆè®¾ç½®ä¸º`nullptr`ï¼Œè¿™æ ·å¯ä»¥åœ¨åŸå¯¹è±¡ææ„æ—¶é¿å…é‡å¤é‡Šæ”¾èµ„æºã€‚

æ€»çš„æ¥è¯´ï¼Œå·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨ä»¥åŠç§»åŠ¨è¯­ä¹‰éƒ½æ˜¯ä¸ºäº†æ›´é«˜æ•ˆåœ°å¤„ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹åˆ«æ˜¯åœ¨å¯¹è±¡åˆ›å»ºã€ä¿®æ”¹å’Œé”€æ¯çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬ä½¿å¾—C++ç¨‹åºå‘˜èƒ½å¤Ÿæ›´å¥½åœ°æ§åˆ¶èµ„æºåˆ†é…å’Œé‡Šæ”¾ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚

## ä¸‰äº”æ³•åˆ™

C++çš„"ä¸‰äº”æ³•åˆ™"ï¼ˆRule of Three/Fiveï¼‰æ˜¯ä¸€ç§å…³äºèµ„æºç®¡ç†çš„æŒ‡å¯¼åŸåˆ™ï¼Œç”¨äºæŒ‡å¯¼C++ç¨‹åºå‘˜ä½•æ—¶éœ€è¦å®šä¹‰ç‰¹å®šçš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ã€‚è¿™ä¸ªæ³•åˆ™ä¸»è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1. **æ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy Constructorï¼‰**ï¼šå¦‚æœä½ éœ€è¦è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œé€šå¸¸æ˜¯å› ä¸ºä½ çš„ç±»ç®¡ç†äº†éœ€è¦æ·±æ‹·è´çš„èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼‰ã€‚å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ä¼šæ‰§è¡Œæµ…æ‹·è´ï¼Œè¿™å¯èƒ½å¯¼è‡´èµ„æºæ³„éœ²æˆ–å…¶ä»–é—®é¢˜ã€‚
2. **æ‹·è´èµ‹å€¼æ“ä½œç¬¦ï¼ˆCopy Assignment Operatorï¼‰**ï¼šä¸æ‹·è´æ„é€ å‡½æ•°ç±»ä¼¼ï¼Œå¦‚æœä½ å®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°ï¼Œé€šå¸¸ä¹Ÿéœ€è¦å®šä¹‰æ‹·è´èµ‹å€¼æ“ä½œç¬¦æ¥ä¿æŒç±»çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚è‡ªå®šä¹‰æ‹·è´èµ‹å€¼æ“ä½œç¬¦å¯ä»¥ç¡®ä¿èµ„æºè¢«æ­£ç¡®åœ°å¤åˆ¶æˆ–ç§»åŠ¨ï¼Œå¹¶ä¸”æ—§å¯¹è±¡çš„èµ„æºå¾—åˆ°é€‚å½“é‡Šæ”¾ã€‚
3. **ææ„å‡½æ•°ï¼ˆDestructorï¼‰**ï¼šå¦‚æœä½ çš„ç±»ç®¡ç†äº†èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ï¼‰ï¼Œä½ éœ€è¦å®šä¹‰ææ„å‡½æ•°æ¥é‡Šæ”¾è¿™äº›èµ„æºã€‚å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤ææ„å‡½æ•°å¯èƒ½ä¸ä¼šé‡Šæ”¾èµ„æºï¼Œå¯¼è‡´èµ„æºæ³„éœ²ã€‚
4. **ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆMove Constructorï¼‰å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ï¼ˆMove Assignment Operatorï¼‰**ï¼šåœ¨C++11åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä½ çš„ç±»ä½¿ç”¨äº†åŠ¨æ€èµ„æºï¼Œé€šå¸¸ä¹Ÿéœ€è¦å®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ã€‚è¿™äº›ç‰¹æ®Šæˆå‘˜å‡½æ•°å¯ä»¥åˆ©ç”¨å³å€¼å¼•ç”¨æ¥è½¬ç§»èµ„æºçš„æ‰€æœ‰æƒï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ‹·è´ï¼Œæé«˜æ•ˆç‡ã€‚

"ä¸‰äº”æ³•åˆ™"å»ºè®®ï¼Œå¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ä¸Šè¿°ä»»ä½•ä¸€ä¸ªç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œé€šå¸¸æœ€å¥½å®šä¹‰æ‰€æœ‰ç›¸å…³çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œä»¥ä¿æŒç±»çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›å‡½æ•°åœ¨ç±»çš„èµ„æºç®¡ç†ä¸­æ‰®æ¼”ç€äº’è¡¥çš„è§’è‰²ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è‡ªå®šä¹‰äº†æ‹·è´æ„é€ å‡½æ•°æ¥å¤„ç†æ·±æ‹·è´ï¼Œä½†æ²¡æœ‰å®šä¹‰æ‹·è´èµ‹å€¼æ“ä½œç¬¦ï¼Œé‚£ä¹ˆä½¿ç”¨èµ‹å€¼æ“ä½œç¬¦æ—¶å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå› ä¸ºé»˜è®¤çš„æ‹·è´èµ‹å€¼æ“ä½œç¬¦å¯èƒ½ä¸ä¼šæ­£ç¡®å¤„ç†èµ„æºçš„å¤åˆ¶ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œ"ä¸‰äº”æ³•åˆ™"æ˜¯ä¸€ç§èµ„æºç®¡ç†çš„æœ€ä½³å®è·µï¼Œå®ƒæŒ‡å¯¼C++å¼€å‘è€…åœ¨å®šä¹‰ç±»æ—¶å¦‚ä½•å¤„ç†èµ„æºçš„æ‹·è´ã€ç§»åŠ¨å’Œé‡Šæ”¾ï¼Œä»¥ç¡®ä¿èµ„æºçš„æ­£ç¡®ç®¡ç†å¹¶é¿å…å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚

# ğŸ“ å‚è€ƒä¸å»¶ç”³

æ‹“å±•é˜…è¯»

[C++ Rvalue References Explained](http://thbecker.net/articles/rvalue_references/section_01.html)

[The rule of three/five/zero - cppreference.com](https://en.cppreference.com/w/cpp/language/rule_of_three)

å‚è€ƒé“¾æ¥

[ã€85ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘C++çš„å·¦å€¼ä¸å³å€¼_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1Aq4y1t73p/?spm_id_from=333.788&vd_source=442af0da8e57c49017d2a3e36b38014c)

[ã€89ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘C++ç§»åŠ¨è¯­ä¹‰_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1BZ4y1R7KF/?spm_id_from=333.788&vd_source=442af0da8e57c49017d2a3e36b38014c)

[ã€90ã€‘ã€Cherno C++ã€‘ã€ä¸­å­—ã€‘stdmoveä¸ç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1Ma411C7Xa/?spm_id_from=333.788&vd_source=442af0da8e57c49017d2a3e36b38014c)

[C++ç§»åŠ¨è¯­ä¹‰ è¯¦ç»†è®²è§£ã€Cherno C++æ•™ç¨‹ã€‘ - zhangyi1357 - åšå®¢å›­](https://www.cnblogs.com/zhangyi1357/p/16018810.html)